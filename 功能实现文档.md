# dream_UE56 功能实现文档

## 1. 框架总览
本项目基于UE5.6，采用GAS（Gameplay Ability System）实现战斗、单位管理、属性系统、UI分层等功能，支持C++与蓝图扩展。

---

## 2. 主要系统与类

### 2.1 角色与单位系统
- **EWCharacterBase**
  - 玩家主角基类，支持时间暂停、单位召唤、目标锁定等功能。
  - 集成GAS，拥有能力系统和属性集。
- **EWUnitBase**
  - 战斗单位基类，具备阵营、AI、战斗、技能等功能。
  - 支持敌我识别、AI行为树集成。
- **EWUnitAttributeSet**
  - 单位属性集，包含血量、法力、行动点、攻击/防御/暴击等战斗属性。
  - 支持属性变更事件、网络同步。

### 2.2 单位管理系统
- **EWUnitManager**
  - 管理玩家拥有的全部单位（n个）与可参战单位（m个）。
  - 支持单位槽位配置、召唤消耗计算、单位状态跟踪。

### 2.3 输入系统
- **EWPlayerController**
  - 使用Enhanced Input，支持战斗、时间控制、单位召唤、UI交互等输入。
  - 可扩展自定义输入动作。

### 2.4 UI框架
- **WidgetController层**
  - `EWOverlayWidgetController`：HUD主控
  - `EWAttributeMenuWidgetController`：属性菜单控制
  - `EWUnitManagementWidgetController`：单位管理控制
- **Widget层**
  - `EWUserWidget`：基础UI控件
  - `EWAttributeProgressBar`：属性进度条
  - `EWUnitSlotWidget`：单位槽位控件
  - `EWMessageWidget`：消息提示控件
- **EWHUD**
  - HUD管理类，负责Widget创建、控制器绑定、显示/隐藏等

---

## 3. 主要功能点

- **GAS集成**：角色和单位均拥有能力系统与属性集，支持GameplayEffect与GameplayAbility扩展。
- **时间暂停机制**：主角可控制游戏时间暂停与恢复。
- **单位召唤系统**：玩家可配置参战单位并消耗行动点进行召唤。
- **目标锁定系统**：支持锁定/切换目标，便于战斗操作。
- **单位管理**：支持单位槽位拖拽、参战配置、召唤消耗显示。
- **UI分层架构**：WidgetController与Widget分离，支持属性事件驱动、数据绑定。
- **输入系统**：支持多种输入动作，便于扩展和自定义。

---

## 4. 扩展性说明

- **蓝图扩展**：所有核心类均支持蓝图派生，便于美术和策划自定义。
- **属性事件驱动**：属性变化自动驱动UI刷新，支持动画、音效等扩展。
- **AI行为树**：单位AI可通过行为树和黑板自定义。
- **UI样式与动画**：Widget可扩展动画、样式、本地化等。
- **数据驱动**：单位、属性、UI均可通过DataTable等数据资源配置。

---

## 5. 典型用法示例

- 创建蓝图WidgetController，绑定属性事件，实现UI与底层数据交互。
- 在HUD蓝图中配置各类Widget和Controller，实现多层UI管理。
- 在PlayerController中绑定输入动作，实现UI弹窗、单位召唤等功能。
- 单位管理界面支持拖拽配置参战单位，自动计算召唤消耗。

---

## 6. 后续建议

- 补充GameplayEffect与GameplayAbility蓝图示例
- 完善AI行为树和技能系统
- 丰富UI动画与交互体验
- 增加本地化与数据驱动支持

---

如需详细教程，请参考《UI框架使用教程.md》。
